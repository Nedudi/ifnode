<h3 id="-docs-docs-api-docs-api-app-docs-api-app-app-controller">[[Docs|docs]] → [[API|docs/api]] → [[app|docs/api/app]] → app.Controller</h3>
<p>Returns controller instance:</p>
<pre><code class="lang-javascript"><span class="hljs-selector-tag">app</span><span class="hljs-selector-class">.Controller</span>(<span class="hljs-selector-attr">[Object options]</span>)
</code></pre>
<p>Controller can be extended by external plugins (example: <code>ifnode-auth</code>, <code>ifnode-permissions</code> etc)</p>
<h3 id="-a-name-options-default-parameters-a-"><a name="options">Default parameters:</a></h3>
<table>
<thead>
<tr>
<th style="text-align:left">Option</th>
<th style="text-align:left">Type</th>
<th style="text-align:left">Description</th>
<th style="text-align:left">Optional</th>
<th style="text-align:left">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">root</td>
<td style="text-align:left">String</td>
<td style="text-align:left">Root path to request</td>
<td style="text-align:left">true</td>
<td style="text-align:left"><code>/path/to/controller/</code> related <code>${backend_folder}</code></td>
</tr>
<tr>
<td style="text-align:left">name</td>
<td style="text-align:left">String</td>
<td style="text-align:left">Name of controller</td>
<td style="text-align:left">true</td>
<td style="text-align:left"><code>path/to/controller</code> related <code>${backend_folder}</code></td>
</tr>
<tr>
<td style="text-align:left">router</td>
<td style="text-align:left">Object</td>
<td style="text-align:left"><code>express.Router</code> options. Check <a href="http://expressjs.com/4x/api.html#router">here</a></td>
<td style="text-align:left">true</td>
<td style="text-align:left"><code>{}</code></td>
</tr>
<tr>
<td style="text-align:left">ajax</td>
<td style="text-align:left">Undefined\</td>
<td style="text-align:left">Boolean</td>
<td style="text-align:left">AJAX settings of controller&#39;s actions</td>
<td style="text-align:left">true</td>
<td>undefined</td>
</tr>
</tbody>
</table>
<h3 id="controller-instance-">Controller instance:</h3>
<h4 id="constants-">Constants:</h4>
<table>
<thead>
<tr>
<th style="text-align:left">Option</th>
<th style="text-align:left">Type</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">.id</td>
<td style="text-align:left">String</td>
<td style="text-align:left">Application id (is auto-generated by GUID function)</td>
</tr>
<tr>
<td style="text-align:left">.root</td>
<td style="text-align:left">String</td>
<td style="text-align:left">Controller&#39;s root path</td>
</tr>
<tr>
<td style="text-align:left">.name</td>
<td style="text-align:left">String</td>
<td style="text-align:left">Controller&#39;s name</td>
</tr>
<tr>
<td style="text-align:left">.router</td>
<td style="text-align:left">[Router]</td>
<td style="text-align:left"><code>express.Router()</code> instance</td>
</tr>
</tbody>
</table>
<h4 id="methods-">Methods:</h4>
<table>
<thead>
<tr>
<th style="text-align:left">Option</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">.param(String param, Function handler)</td>
<td style="text-align:left">Analog of express<code>s</code>app.param`. Check <a href="http://expressjs.com/4x/api.html#app.param">here</a></td>
</tr>
<tr>
<td style="text-align:left">[[.method(String method [, String path] [, Object options], Function callback [, Function callback...])</td>
<td style="text-align:left">docs/api/app/controller/.method]]</td>
<td>Method for creating controller&#39;s route</td>
</tr>
<tr>
<td style="text-align:left">.end()</td>
<td style="text-align:left">End of controller (if request cannot have handler invoke <code>response.not_found()</code> method. By default go to next controller to find request handler)</td>
</tr>
<tr>
<td style="text-align:left">.use([String path,] Function callback [, Function callback...])</td>
<td style="text-align:left">Check <a href="http://expressjs.com/4x/api.html#app.use">here</a></td>
</tr>
<tr>
<td style="text-align:left">.error(Function handler)</td>
<td style="text-align:left">Invoke <code>.error()</code> handler when any request handler&#39;s <code>next()</code> method of controller get instance of <code>Error</code> class. By default try find parent error handler, and if not find throw error in <code>node.js</code></td>
</tr>
</tbody>
</table>
<h4 id="handler-options-">Handler options:</h4>
<p>All handlers <code>request</code> and <code>response</code> methods populated by same custom options:</p>
<h5 id="request-">request:</h5>
<table>
<thead>
<tr>
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>.data</td>
<td>&quot;Syntax sugar&quot;. Return <code>request.body</code>, or <code>request.query</code> or <code>null</code></td>
</tr>
</tbody>
</table>
<h5 id="response-">response:</h5>
<table>
<thead>
<tr>
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>.ok([String\</td>
<td>Object data])</td>
<td>Set status <code>200</code> and return <code>data</code></td>
</tr>
<tr>
<td><a name="response-fail">.fail([String\</td>
<td>Object data])</a></td>
<td>Set status <code>400</code> and return <code>data</code> or text &quot;Bad Request&quot;</td>
</tr>
<tr>
<td><a name="response-error">.error([String\</td>
<td>Object data])</a></td>
<td>Set status <code>500</code> and return <code>data</code> or text &quot;Server Internal Error&quot;</td>
</tr>
<tr>
<td>.unauthorized([String\</td>
<td>Object data])</td>
<td>Set status <code>401</code> and return <code>data</code></td>
</tr>
<tr>
<td>.forbidden([String\</td>
<td>Object data])</td>
<td>Set status <code>403</code> and return <code>data</code></td>
</tr>
<tr>
<td><a name="response-notfound">.not_found([String\</td>
<td>Object data])</a></td>
<td>Set status <code>404</code> and return <code>data</code></td>
</tr>
</tbody>
</table>
<p>Aliases:</p>
<table>
<thead>
<tr>
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="#response-fail">.bad_request()</a></td>
<td>Alias of <code>.fail()</code></td>
</tr>
<tr>
<td><a href="#response-fail">.badRequest()</a></td>
<td>Alias of <code>.fail()</code></td>
</tr>
<tr>
<td><a href="#response-error">.err()</a></td>
<td>Alias of <code>.error()</code></td>
</tr>
<tr>
<td><a href="#response-notfound">.notFound()</a></td>
<td>Alias of <code>.not_found()</code></td>
</tr>
</tbody>
</table>
<h4 id="notes-">Notes:</h4>
<p>Controller&#39;s filename <code>!.js</code> and <code>~.js</code> are special. Those filenames not participate in forming name and root options.</p>
<p><code>!.js:</code> always initialize first in folder. Next loaded controllers into folders, and next files
<code>~.js:</code> always initialize last in folder</p>
<p>Example:</p>
<pre><code class="lang-javascript">/<span class="hljs-regexp">/ /protected</span><span class="hljs-regexp">/controllers/api</span><span class="hljs-regexp">/v1/</span>!.js
var controller = app.Controller();
controller.name /<span class="hljs-regexp">/ api/v</span>1
controller.root /<span class="hljs-regexp">/ /api</span><span class="hljs-regexp">/v1/</span>

/<span class="hljs-regexp">/ /protected</span><span class="hljs-regexp">/controllers/api</span><span class="hljs-regexp">/v1/user</span>.js
var controller = app.Controller({
    <span class="hljs-symbol">root:</span> <span class="hljs-string">'/user'</span>
});
controller.name /<span class="hljs-regexp">/ api/v</span>1/user
controller.root /<span class="hljs-regexp">/ /user</span>
</code></pre>
<p>Static methods (use for creating controller&#39;s plugin):</p>
<table>
<thead>
<tr>
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>.process_config(...Function processor\</td>
<td>Array processors)</td>
<td>Add handler for controller`s config</td>
</tr>
<tr>
<td>.populate(...Function populator\</td>
<td>Array populators)</td>
<td>Add route middleware for populate arguments own options</td>
</tr>
<tr>
<td>.middleware(...Function middleware\</td>
<td>Array middleware)</td>
<td>Add route middleware for process request</td>
</tr>
</tbody>
</table>
