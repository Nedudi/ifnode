<!DOCTYPE html>
<html lang="en-us">
    <head>
        <meta charset="UTF-8">
        <title>ifnode - Excellent Node.js Framework</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content='The ifnode is a simple, flexible, super-light and pluginnable node.js framework. Allows to start developing of application after few seconds of "npm install"'>
        <link rel="stylesheet" type="text/css" href="/assets/css/open-sans.css?v=1.0.1" media="screen">
        <link rel="stylesheet" type="text/css" href="/assets/css/prism-default.css?v=1.0.1" media="screen">
        <link rel="stylesheet" type="text/css" href="/assets/css/normalize.css?v=1.0.1" media="screen">
        <link rel="stylesheet" type="text/css" href="/assets/css/main.css?v=1.0.1" media="screen">
    </head>
    <body>
        <header class="page-header">
            <div class="project-name">
                <a href="/">ifnode</a>
            </div>
            <div class="project-tagline">Simple, flexible, super-light and pluginnable framework</div>
            <div class="project-buttons">
                <a href="https://github.com/ilfroloff/ifnode" class="btn">View on GitHub</a>
            </div>
        </header>
        <main class="centered-content main-content docs">
            <aside id="toc">
    <ul>
<li><a href="/docs/intro">Introduction</a><ul>
<li><a href="/docs/intro/ideology">Ideology</a></li>
</ul>
</li>
<li><a href="/docs/install">Install</a></li>
<li><a href="/docs/app">Application Items</a><ul>
<li><a href="/docs/app/structure">Structure</a></li>
<li><a href="/docs/app/file">app.js</a></li>
<li><a href="/docs/app/config">Config</a><ul>
<li><a href="/docs/app/config/default">Default config</a></li>
<li><a href="/docs/app/config/middleware">Middleware</a></li>
</ul>
</li>
<li><a href="/docs/app/extensions">Extensions</a></li>
<li><a href="/docs/app/models">Models</a></li>
<li><a href="/docs/app/components">Components</a></li>
<li><a href="/docs/app/controllers">Controllers</a></li>
<li><a href="/docs/app/plugins">Plugins</a><ul>
<li><a href="/docs/app/plugins/component">component</a></li>
<li><a href="/docs/app/plugins/controller">controller</a></li>
<li><a href="/docs/app/plugins/schema">schema</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="/docs/api">API</a><ul>
<li><a href="/docs/api/ifnode">ifnode</a></li>
<li><a href="/docs/api/iconnectionserver">IConnectionServer</a></li>
<li><a href="/docs/api/app">app</a><ul>
<li><strong>app.Model</strong></li>
<li><a href="/docs/api/app/component">app.Component</a></li>
<li><a href="/docs/api/app/controller">app.Controller</a></li>
</ul>
</li>
</ul>
</li>
</ul>

</aside>
<section id="docs">
    <h2 id="app-model">app.Model</h2>
<p>Returns <code>model</code> instance:</p>
<pre><code class="lang-javascript">app<span class="token punctuation" >.</span><span class="token function" >Model</span><span class="token punctuation" >(</span>Object model_options <span class="token punctuation" >[</span><span class="token punctuation" >,</span> Object schema_options<span class="token punctuation" >]</span><span class="token punctuation" >)</span>
</code></pre>
<p>All model&#39;s schemas must be added by plugins (like <a href="https://npmjs.com/package/ifnode-mongoose"><code>ifnode-mongoose</code></a>).</p>
<p>Default schema is <code>virtual</code>. Code of <code>virtual</code> schema is find <a href="https://github.com/ilfroloff/ifnode/blob/master/plugins/ifnode-virtual/index.js">here</a></p>
<h3 id="parameters">Parameters</h3>
<h4 id="model_options">model_options</h4>
<p>Options to create model instance. All options are specified by model&#39;s schema.</p>
<p>Below recommended options:</p>
<table>
<thead>
<tr>
<th style="text-align:left">Option</th>
<th style="text-align:left">Type</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">.name</td>
<td style="text-align:left">String</td>
<td style="text-align:left">Name of model</td>
</tr>
<tr>
<td style="text-align:left">.table</td>
<td style="text-align:left">String</td>
<td style="text-align:left">Name of table (for SQL databases: MySQL, PostgreSQL, etc)</td>
</tr>
<tr>
<td style="text-align:left">.collection</td>
<td style="text-align:left">String</td>
<td style="text-align:left">Name of collection (for NoSQL databases: mongodb, redis, etc)</td>
</tr>
<tr>
<td style="text-align:left">.columns</td>
<td style="text-align:left">Object</td>
<td style="text-align:left">Describe table or collection columns (example: <code>mongoose</code> options <code>columns</code>)</td>
</tr>
</tbody>
</table>
<h4 id="schema_options">schema_options</h4>
<p>Options for build model&#39;s schema.</p>
<table>
<thead>
<tr>
<th style="text-align:left">Option</th>
<th style="text-align:left">Type</th>
<th style="text-align:left">Description</th>
<th style="text-align:left">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">.db</td>
<td style="text-align:left">String</td>
<td style="text-align:left">Name of database (one of keys in <code>config.db</code>)</td>
<td style="text-align:left">First in <code>config.db</code> or <code>virtual</code></td>
</tr>
<tr>
<td style="text-align:left">.alias</td>
<td style="text-align:left">String &#10072; Array</td>
<td style="text-align:left">Aliases of model (in <code>app.models</code>)</td>
<td style="text-align:left">-</td>
</tr>
</tbody>
</table>
<h3 id="create-own-schema">Create own Schema</h3>
<p>Example:</p>
<pre><code class="lang-javascript"><span class="token comment" spellcheck="true">// own-schema.js</span>
exports<span class="token punctuation" >.</span>schema <span class="token operator" >=</span> <span class="token keyword" >function</span><span class="token punctuation" >(</span>app<span class="token punctuation" >,</span> Schema<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    Schema<span class="token punctuation" >.</span>schema <span class="token operator" >=</span> <span class="token string" >'name-of-schema'</span><span class="token punctuation" >;</span>
    Schema<span class="token punctuation" >.</span>driver <span class="token operator" >=</span> <span class="token keyword" >function</span><span class="token punctuation" >(</span>db_config<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
        <span class="token comment" spellcheck="true">// driver initaialize</span>
        <span class="token keyword" >return</span> driver<span class="token punctuation" >;</span>
    <span class="token punctuation" >}</span><span class="token punctuation" >;</span>

    Schema<span class="token punctuation" >.</span>fn<span class="token punctuation" >.</span>initialize <span class="token operator" >=</span> <span class="token keyword" >function</span><span class="token punctuation" >(</span>model_config<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
        <span class="token comment" spellcheck="true">// model instance initialize</span>
    <span class="token punctuation" >}</span><span class="token punctuation" >;</span>
    Schema<span class="token punctuation" >.</span>fn<span class="token punctuation" >.</span>compile <span class="token operator" >=</span> <span class="token keyword" >function</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
        <span class="token comment" spellcheck="true">// returns model instance which accessed by app.models[name]</span>
        <span class="token keyword" >return</span> model<span class="token punctuation" >;</span>
    <span class="token punctuation" >}</span><span class="token punctuation" >;</span>
<span class="token punctuation" >}</span><span class="token punctuation" >;</span>
</code></pre>
<p>Real schema <code>ifnode-knex.js</code>:</p>
<pre><code class="lang-javascript"><span class="token comment" spellcheck="true">// knex.js</span>
<span class="token keyword" >var</span> knex <span class="token operator" >=</span> <span class="token function" >require</span><span class="token punctuation" >(</span><span class="token string" >'knex'</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>

exports<span class="token punctuation" >.</span>schema <span class="token operator" >=</span> <span class="token keyword" >function</span><span class="token punctuation" >(</span>app<span class="token punctuation" >,</span> KnexSchema<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    KnexSchema<span class="token punctuation" >.</span>schema <span class="token operator" >=</span> <span class="token string" >'knex'</span><span class="token punctuation" >;</span>
    KnexSchema<span class="token punctuation" >.</span>driver <span class="token operator" >=</span> <span class="token keyword" >function</span><span class="token punctuation" >(</span>db_config<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
        <span class="token keyword" >return</span> <span class="token function" >knex</span><span class="token punctuation" >(</span>db_config<span class="token punctuation" >)</span><span class="token punctuation" >;</span>
    <span class="token punctuation" >}</span><span class="token punctuation" >;</span>

    KnexSchema<span class="token punctuation" >.</span>fn<span class="token punctuation" >.</span>initialize <span class="token operator" >=</span> <span class="token keyword" >function</span><span class="token punctuation" >(</span>model_config<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
        <span class="token keyword" >this</span><span class="token punctuation" >.</span>table <span class="token operator" >=</span> model_config<span class="token punctuation" >.</span>table<span class="token punctuation" >;</span>
        <span class="token keyword" >this</span><span class="token punctuation" >.</span>driver <span class="token operator" >=</span> <span class="token keyword" >this</span><span class="token punctuation" >.</span>_driver<span class="token punctuation" >;</span>

        <span class="token keyword" >this</span><span class="token punctuation" >.</span>all <span class="token operator" >=</span> <span class="token keyword" >function</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
            <span class="token keyword" >return</span> <span class="token keyword" >this</span><span class="token punctuation" >.</span><span class="token function" >driver</span><span class="token punctuation" >(</span><span class="token keyword" >this</span><span class="token punctuation" >.</span>table<span class="token punctuation" >)</span><span class="token punctuation" >;</span>
        <span class="token punctuation" >}</span><span class="token punctuation" >;</span>
    <span class="token punctuation" >}</span><span class="token punctuation" >;</span>
    KnexSchema<span class="token punctuation" >.</span>fn<span class="token punctuation" >.</span>compile <span class="token operator" >=</span> <span class="token keyword" >function</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
        <span class="token keyword" >return</span> <span class="token keyword" >this</span><span class="token punctuation" >;</span>
    <span class="token punctuation" >}</span><span class="token punctuation" >;</span>
<span class="token punctuation" >}</span><span class="token punctuation" >;</span>
</code></pre>
<p>Description of field:</p>
<table>
<thead>
<tr>
<th>Options</th>
<th>Description</th>
<th>Optional</th>
</tr>
</thead>
<tbody>
<tr>
<td>.schema</td>
<td>Name of schema</td>
</tr>
<tr>
<td>.driver(Object db_config)</td>
<td>Static method for initializing of schema driver</td>
<td>true</td>
</tr>
<tr>
<td>.fn</td>
<td>Alias of <code>Schema.prototype</code></td>
<td>-</td>
</tr>
<tr>
<td>.fn._driver</td>
<td>Results of <code>.driver()</code> method</td>
<td>-</td>
</tr>
<tr>
<td>.fn.initialize(Object model_config)</td>
<td>Create model instance by schema</td>
<td>true</td>
</tr>
<tr>
<td>.fn.compile()</td>
<td>Return final model instance (this model can access by <code>app.models</code>)</td>
<td>false</td>
</tr>
</tbody>
</table>
<p>Aliases:</p>
<table>
<thead>
<tr>
<th>Options</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>.fn.init()</td>
<td>Alias of <code>.fn.initialize()</code></td>
</tr>
</tbody>
</table>

</section>
<section id="toc-page">
    <a href="/docs/toc">Table of Content</a>
</section>

        </main>
        <footer class="page-footer">
            <span class="owner">
                <a href="https://github.com/ilfroloff/ifnode">ifnode</a> is maintained by <a href="https://github.com/ilfroloff">ilfroloff</a> ©
            </span>
        </footer>
    </body>
</html>
